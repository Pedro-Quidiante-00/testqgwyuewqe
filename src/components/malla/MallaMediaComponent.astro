---
interface Item {
    asignatura: string;
    horas?: string;
    contenidoDetallado?: string;
}

interface Tarjeta {
    titulo: string;
    items: Item[];
}

interface Ciclo {
    nombreCiclo: string;
    tarjetas: Tarjeta[];
}

interface Props {
    ciclos: Ciclo[];
}

const { ciclos } = Astro.props;
const claseContenedorTarjeta = "bg-white p-6 rounded-xl shadow-lg";
const obtenerClaseFondo = (tituloTarjeta: string, asignatura: string): string => {
    const titulo = tituloTarjeta.toLowerCase();
    const asignaturaLower = asignatura.toLowerCase();
    if (asignaturaLower.includes("paes")) return 'bg-red-50';
    if (asignaturaLower.includes("total horas")) return 'bg-blue-100';
    if (titulo.includes("artístic") || titulo.includes("proyecto")) {
        return 'bg-blue-50';
    }
    return 'bg-gray-50';
}
---

<div id="contenido-media" class="tab-content hidden">
    <div class="text-center mb-12">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">Enseñanza Media</h2>
        <p class="text-lg text-gray-600 max-w-3xl mx-auto">
            Profundización académica y desarrollo de la especialidad artística elegida por el estudiante.
        </p>
    </div>
    {ciclos.map((ciclo) => (
            <div class="mb-16">
                <h3 class="text-3xl font-bold text-red-800 mb-6 pb-2 border-b-2 border-red-200">
                    {ciclo.nombreCiclo}
                </h3>
                <div class="grid md:grid-cols-2 gap-8">
                    {ciclo.tarjetas.map((tarjeta) => (
                            <div class={claseContenedorTarjeta}>
                                <h4 class="text-2xl font-bold text-gray-900 mb-4">{tarjeta.titulo}</h4>
                                <div class="space-y-3">
                                    {tarjeta.items.map((item) => {
                                        const claseFondo = obtenerClaseFondo(tarjeta.titulo, item.asignatura);
                                        const esDetallada = !!item.contenidoDetallado;

                                        return (
                                                <div class={`p-3 rounded-lg ${claseFondo} ${esDetallada ? 'block' : 'flex justify-between'}`}>
                                                    <span class={`font-medium ${esDetallada ? 'block mb-1' : ''} ${item.asignatura.includes("PAES") ? 'text-red-800' : ''}`}>
                                            {item.asignatura}
                                        </span>
                                                    {esDetallada ? (
                                                            <span class="text-sm">{item.contenidoDetallado}</span>
                                                    ) : (
                                                        item.horas && <span>{item.horas}</span>
                                                    )}
                                                </div>
                                        )
                                    })}
                                </div>
                            </div>
                    ))}
                </div>
            </div>
    ))}
</div>